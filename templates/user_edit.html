{% extends "base.html" %}
{% block content %}
<h1>Edit User</h1>

<form method="post" action="/users/{{ target_user.id }}/edit" class="form">
  <label>Email
    <input type="email" name="email" required value="{{ target_user.email }}">
  </label>

  <label>Role
    <select name="role" required>
      {% for r in roles %}
        <option value="{{ r.value }}" {% if r == target_user.role %}selected{% endif %}>
          {{ r.value|title }}
        </option>
      {% endfor %}
    </select>
  </label>

  <label>Linked Employee (optional)
    <select name="employee_id">
      <option value="0">-- None --</option>
      {% for e in employees %}
        <option value="{{ e.id }}" {% if target_user.employee_id == e.id %}selected{% endif %}>
          {{ e.first_name }} {{ e.last_name }} ({{ e.email }})
        </option>
      {% endfor %}
    </select>
  </label>

  <button type="submit">Save</button>
</form>

<p><a href="/users">Back to User List</a></p>
{% endblock %}
